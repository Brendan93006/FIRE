{% extends "layout.html" %}

{% block title %}
- Invest
{% endblock %}

{% block main %}
        <form action="/invest" method="POST">
        <div class="mb-3">
            <input autocomplete="off" autofocus class="form-control mx-auto w-auto" name="symbol" placeholder="Symbol" type="text" required>
        </div>
        <div class="mb-3">
            <input type="radio" class="form-check-input" id="shares" name="type" value="shares" checked>
            <label class="form-check-label" for="shares">Shares</label>
            <input type="radio" class="form-check-input" id="dollars" name="type" value="dollars">
            <label class="form-check-label" for="dollars">Dollars</label>
        </div>
        <div class="mb-3">
            <input class="form-control mx-auto w-auto" name="shares" placeholder="Shares" type="number" step="1" min="1">
        </div>
        <div class="mb-3">
            <input class="form-control mx-auto w-auto" name="dollars" placeholder="Dollars" type="number" step="0.01" min="0.01">
        </div>
        
        <div class="mb-3">
            <select class="form-control mx-auto w-auto" name="account" placeholder="Account" type="text" required>
                <option value="" disabled selected>Select Account</option>
                {% for account in accounts %}
                    <option value="{{ account.id }}">{{ account.name }}</option>
                {% endfor %}
            </select>
        </div>
        <button class="btn btn-success" type="submit">Buy Shares</button>
    </form>
    <script>
        const sharesRadio = document.getElementById('shares');
        const dollarsRadio = document.getElementById('dollars');
        const sharesInputDiv = document.querySelector('input[name="shares"]').parentElement;
        const dollarsInputDiv = document.querySelector('input[name="dollars"]').parentElement;

        function toggleInputs() {
            if (sharesRadio.checked) {
                sharesInputDiv.style.display = 'block';
                dollarsInputDiv.style.display = 'none';
            } else {
                sharesInputDiv.style.display = 'none';
                dollarsInputDiv.style.display = 'block';
            }
        }
        sharesRadio.addEventListener('change', toggleInputs);
        dollarsRadio.addEventListener('change', toggleInputs);

        // Initialize visibility based on the default checked radio button
        toggleInputs();
    </script>
{% endblock %}